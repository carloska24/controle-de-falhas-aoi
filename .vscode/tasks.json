{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Iniciar servidor backend",
			"type": "shell",
			"command": "cd c:\\Users\\joaob\\controle-de-falhas-aoi\\backend; npm run start",
			"problemMatcher": [
				"$eslint-stylish"
			],
			"group": "build"
		},
		{
			"label": "Testar login via PowerShell",
			"type": "shell",
			"command": "powershell -NoLogo -NoProfile -Command \"$base='http://127.0.0.1:3000'; $payload='{\"\"username\"\": \"\"DevAdmin\"\", \"\"password\"\": \"\"123456\"\"}'; $resp=Invoke-RestMethod -Method Post -Uri ($base + '/api/auth/login') -ContentType 'application/json' -Body $payload; if(-not $resp.token){ throw 'Login falhou' }; 'TOKEN_OK ' + ($resp.token.Substring(0,16) + '...')\"",
			"problemMatcher": [
				"$eslint-stylish"
			],
			"group": "build"
		},
		{
			"label": "Testar login via curl (Windows)",
			"type": "shell",
			"command": "curl -s -H \"Content-Type: application/json\" -X POST -d \"{\\\"username\\\":\\\"DevAdmin\\\",\\\"password\\\":\\\"123456\\\"}\" http://127.0.0.1:3000/api/auth/login | powershell -NoLogo -NoProfile -Command \"$input | ConvertFrom-Json | ForEach-Object { if(-not $_.token){ throw 'Login falhou' } else { 'TOKEN_OK ' + ($_.token.Substring(0,16) + '...') } }\"",
			"problemMatcher": [
				"$eslint-stylish"
			],
			"group": "build"
		},
		{
			"label": "Login via Node one-liner",
			"type": "shell",
			"command": "node -e \"(async()=>{const res=await fetch('http://127.0.0.1:3000/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:'DevAdmin',password:'123456'})}); const j=await res.json(); if(!res.ok) throw new Error(j.error||res.statusText); console.log('TOKEN_OK', j.token.slice(0,16)+'...');})();\"",
			"problemMatcher": [
				"$eslint-stylish"
			],
			"group": "build"
		}
	]
}